<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.farm.service.IMemberFormService">
	<insert id="registMember"
		parameterType="com.farm.dto.MemberDTO">
		INSERT INTO member (member_id, user_id, user_pw, user_type, phone_num, name, emailid, emaildomain)
			VALUES (seq_member_id.nextval, '${user_id}', '${user_pw}', '${user_type}', '${phone_num}', '${name}', '${emailid}', '${emaildomain}')
	</insert>
	<insert id="registAddr">
		INSERT INTO address (addr_id, member_id, zipcode, addr1, addr2)
			VALUES(seq_address_id.nextval, seq_member_id.currval, '${zipcode}', '${addr1}', '${addr2}')
	</insert>
	<insert id="registFarm">
		INSERT INTO farm (farm_id, member_id, account, brand_name, com_addr1, com_addr2, com_zip, owner_name, depositor)
			VALUES(${farm_id}, seq_member_id.currval, '${account}', '${brand_name}', '${com_addr1}', '${com_addr2}', '${com_zip}', '${owner_name}', '${depositor}')
	</insert>
	
	<update id="updateMember" parameterType="com.farm.dto.MemberDTO">
		UPDATE member SET 
			user_pw = #{user_pw},
			name = #{name}, 
			emailid = #{emailid}, 
			emaildomain = #{emaildomain},
			phone_num = #{phone_num} 
		WHERE member_id = #{member_id}
	</update>
	
</mapper>