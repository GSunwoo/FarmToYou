<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="com.farm.service.IInquiryService">
   <!-- 문의 조회 -->
    <select id="getTotalCount">
    SELECT COUNT(*) FROM inquiry
    	WHERE member_id = #{member_id}
    </select>
   
   <select id="selectInq"
   resultType="com.farm.dto.InquiryDTO"
   >
   SELECT inquiry_id, prod_id, content, member_id, title
         FROM inquiry WHERE member_id = #{member_id}
   </select>
   <!-- 조인걸어서 가야돼 멤버 -->
   <!-- 문의 등록 -->
   <insert id="insertInq"
      parameterType="com.farm.dto.InquiryDTO">
      INSERT INTO inquiry
         (inquiry_id, prod_id, user_id, content, title, member_id)   
      VALUES
         (seq_inquiry_id.nextval, #{prod_id} ,#{user_id} , #{content} ,#{title}, #{member_id})
   </insert>
   
   <!-- 문의 수정 -->
   <update id="updateInquiry"
      parameterType="com.farm.dto.InquiryDTO">
      UPDATE inquiry 
         SET title = #{title}, content = #{content}
            WHERE inquiry_id = #{inquiry_id}
   </update>
   
   <!-- 문의 삭제 -->
   <delete id="deleteInquiry"
      parameterType="Long">
      DELETE FROM inquiry WHERE inquiry_id = #{inquiry_id} AND member_id= #{member_id}
   </delete>
</mapper>